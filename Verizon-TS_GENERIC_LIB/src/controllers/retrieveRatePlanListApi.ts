/**
 * VerizonLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

import { ApiResponse, RequestOptions } from '../core';
import { Rateplan, rateplanSchema } from '../models/rateplan';
import { string } from '../schema';
import { BaseApi } from './baseApi';
import { RuleRestErrorResponseError } from '../errors/ruleRestErrorResponseError';

export class RetrieveRatePlanListApi extends BaseApi {
  /**
   * Retrieves the rate plans and rate plan details for a profile ID.
   *
   * @param ecpdId The Enterprise Customer Profile Database ID. This is the same as the accountName value
   * @return Response from the API call
   */
  async getRatePlanList(
    ecpdId: string,
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<Rateplan>> {
    const req = this.createRequest('GET');
    req.baseUrl('Thingspace');
    const mapped = req.prepareArgs({ ecpdId: [ecpdId, string()] });
    req.appendTemplatePath`/v2/triggers/rateplanlist/${mapped.ecpdId}`;
    req.defaultToError(RuleRestErrorResponseError, 'Error response');
    req.authenticate([{ thingspaceOauth1: true }, { vzM2MToken: true }]);
    return req.callAsJson(rateplanSchema, requestOptions);
  }
}
