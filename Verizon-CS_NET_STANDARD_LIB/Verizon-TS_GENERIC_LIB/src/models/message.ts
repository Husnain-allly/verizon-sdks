/**
 * VerizonLib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

import {
  array,
  boolean,
  lazy,
  optional,
  Schema,
  typedExpandoObject,
  unknown,
} from '../schema';
import { Limits, limitsSchema } from './containers/limits';
import {
  DistributionSchedule,
  distributionScheduleSchema,
} from './distributionSchedule';
import {
  DistributionTypes,
  distributionTypesSchema,
} from './distributionTypes';
import { Generic, genericSchema } from './generic';
import { RoadUserTypes, roadUserTypesSchema } from './roadUserTypes';
import { TriggerCondition, triggerConditionSchema } from './triggerCondition';

export interface Message {
  /**
   * Defines whether the message is private or public.
   * Private messages are published under the Vendor ID defined in the configuration and only visible to devices of selected vendors.
   * Public messages are published under the Public vendor and are visible to all the users.
   */
  isPrivate: boolean;
  /** Type of the Road User. */
  roadUserType: RoadUserTypes[];
  /** Trigger conditions that define on which road user action the message will be sent. If multiple Trigger Conditions are defined any of them will trigger the message. */
  triggerConditions: TriggerCondition[];
  /** List of limitations. These limitations can be used for making the trigger condition more precise by defining speed and motion direction requirements to be met before the messages are sent out. */
  limits?: Limits[];
  /** Type of the distribution. */
  distributionType?: DistributionTypes[];
  /** The distribution schedule parameters for broadcast messages. */
  distributionSchedule?: DistributionSchedule;
  /**
   * Custom message which is defined by the user and can support "any" message type or format.
   * **Note:** ETX prefers the j2735 or the j2735_gr encoding and only vendor specific message types are allowed to be published in different message formats.
   */
  generic: Generic;
  additionalProperties?: Record<string, unknown>;
}

export const messageSchema: Schema<Message> = typedExpandoObject(
  {
    isPrivate: ['isPrivate', boolean()],
    roadUserType: ['roadUserType', array(roadUserTypesSchema)],
    triggerConditions: ['triggerConditions', array(triggerConditionSchema)],
    limits: ['limits', optional(array(limitsSchema))],
    distributionType: [
      'distributionType',
      optional(array(distributionTypesSchema)),
    ],
    distributionSchedule: [
      'distributionSchedule',
      optional(lazy(() => distributionScheduleSchema)),
    ],
    generic: ['generic', lazy(() => genericSchema)],
  },
  'additionalProperties',
  optional(unknown())
);
